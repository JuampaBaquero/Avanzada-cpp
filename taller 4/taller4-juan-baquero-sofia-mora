#include <iostream>
#include <new>
#include <string>
#include <unistd.h>
using namespace std;

// Estructura de Replcia 
struct ImitacionFake {
    int ID; 
    string Nombre; 
    string TipoEspe;
    string ValEspe; 
};

struct Actividad2{
    int filas;
    int columnas;
};

void actividad2();
void actividad3();
void actividad1();

// Funcion imprimir
void printrem(ImitacionFake* bay, int numrem) {
    cout << "\n   Lista de réplicas   \n";
    for (int i = 0; i < numrem; i++) {
        cout << "Réplica " << i + 1
             << " -> ID: " << bay[i].ID
             << ", Nombre: " << bay[i].Nombre
             << ", " << bay[i].TipoEspe << ": " << bay[i].ValEspe
             << endl;
    }
}


int main(){
    int opcion;
    do {
        cout << endl
            << "\t\t|+--- LAS AVENTURAS DE Bytey ---+" << endl
            << "\t\t|              -> MENU PRINCIPAL <-               |" << endl
            << "\t\t+-------------------------------------------------+" << endl
            << "\t\t|                                                 |" << endl
            << "\t\t| 1)      Mochila dinámica                        |" << endl
            << "\t\t| 2)      Laberinto estructuras                   |" << endl
            << "\t\t| 3)      Cámara de las copias                    |" << endl
            << "\t\t| 4)      Salir                                   |" << endl
            << "\t\t+-------------------------------------------------+" << endl
            << "\t\t|    TU RESPUESTA ----> ";
        cin >> opcion; 

        switch(opcion) {
            case 1: actividad1(); break;
            case 2: actividad2(); break;
            case 3: actividad3(); break;
            case 4: cout << "Chauu aventurer@\n"; break;
            default: cout << "Opción inválida\n"; break;
        }
    } while(opcion != 4);

    return 0;
}

void actividad1(){
    system("clear");
    int integers;
    int max;
    int *array = nullptr;
    int *newArray = nullptr;

    std::cout << "\nIngrese el numero de integers magicos que van a entrar a la mochila de Bytey inicialmente -> ";
    std::cin >> integers;
    array = new int[integers];

    //Llenamos el primer array
    for(int i = 0; i < integers; i ++){
        std::cout << "Ingrese el " << i + 1 << " elemento -> ";
        std::cin >> *(array + i);
    }

    std::cout << "La mochila de Bytey se ve algo asi: \n\n";

    for(int i = 0; i < integers; i ++){
        std::cout << *(array + i) << "\t";
    }
    std::cout << "\n\n";
    system("read -p 'Presione ENTER para continuar...' var");
    system("clear");
    std::cout << "Ingrese ahora cuantos integers magicos quieres ingresar" 
              << "\n(la mochila duplicara su tamano hasta que pueda almacenar todo)"
              << "\n-> ";
    std::cin >> max;
    sleep(0.5);

    int newTamano = integers;
    while(newTamano < max + integers){
        std::cout << "\nDuplicando tamano . . .";
        sleep(0.4);
        newTamano *= 2;
        std::cout << "\nTamano actual: " << newTamano;
    }
    newArray = new int[newTamano];

    for(int i = 0; i < integers; i ++){
        *(newArray + i) = *(array + i);
    }
    for(int i = integers; i < newTamano; i ++){
        *(newArray + i) = 0;
    }
    delete[] array;

    std::cout << "\n\nYA SE HIZO EL PASO!"
              << "\nIngresa ahora los nuevos numeros: ";
    for(int i = integers; i < max + integers; i ++){
        std::cout << "\n" << i - integers + 1 << " -> ";
        std::cin >> *(newArray + i);
    }

    std::cout << "\nEstamos cargando su input . . .";
    sleep(0.4);
    std::cout << "\nSu nueva mochila es esta: \n\n";

    for(int i = 0; i < newTamano; i ++){
        std::cout << *(newArray + i) << "\t";
    }
    std::cout << "\n\n";
    delete[] newArray;
    system("read -p 'Presione ENTER para continuar...' var");
}

void actividad2(){
    system("clear");
    int numPatron;
    Actividad2 *a = new Actividad2;
    
    std::cout << "Ingresa el numero de filas de la matriz: ";
    std::cin >> a -> filas;
    
    std::cout << "Ingresa el numero de columnas de la matriz: ";
    std::cin >> a -> columnas;
    
    int **matriz = new int*[a ->filas];
    
    for(int i = 0; i < a -> filas; i++){
        *(matriz + i) = new int[a -> columnas];
    }

    std::cout << "\nIngrese el numero del patron que quiere:"
              << "\n\t1) Patron secuencial"
              << "\n\t2) Patron zigzag"
              << "\n\t3) Patron espiral"
              << "\n\t4) Patron Fibonacci"
              << "\n\t5) Patron de 2 en 2"
              << "\n--> ";
    std::cin >> numPatron;
    
    switch(numPatron){
        case 1:
        {
            int n = 0;
            for(int i = 0; i < a -> filas; i ++){
                for(int j = 0; j < a -> columnas; j ++){
                    n++;
                    *(*(matriz + i) + j) = n;
                }
            }
        } break;
        case 2:
        {
            bool alDerecho = true;
            int n = 0;

            for(int i = 0; i < a -> filas; i ++){
                for(int j = 0; j < a -> columnas; j++){
                    n++;
                    
                    if(alDerecho){
                        *(*(matriz + i) + j) = n;
                    } else{
                        *(*(matriz + i) + a -> columnas - j - 1) = n;
                    }
                }
                alDerecho = !alDerecho;
            }
        } break;
        case 3:
        {
            int n = 1;
            int k = 0;
            bool continuar = true;

            
            for(int i = 0; i < a -> filas; i ++){
                for(int j = 0; j < a -> columnas; j ++){
                    *(*(matriz + i) + j) = 0;
                }
            }
            while(continuar){
                continuar = false;

                for(int i = k; i < a -> columnas - k; i++){
                    if(*(*(matriz + k) + i) == 0){ 
                        continuar = true;
                        *(*(matriz + k) + i) = n++;
                    }
                }
                for(int i = k + 1; i < a -> filas - k; i++){
                    if(*(*(matriz + i) + a -> columnas - 1 - k) == 0){ 
                        continuar = true;
                        *(*(matriz + i) + a -> columnas - 1 - k) = n++;
                    }
                }
                for(int i = a -> columnas - k - 2; i >= k; i--){
                    if(*(*(matriz + a -> filas - 1 - k) + i) == 0){ 
                        continuar = true;
                        *(*(matriz + a -> filas - 1 - k) + i) = n++;
                    }
                }
                for(int i = a -> filas - k - 2; i > k; i--){
                    if(*(*(matriz + i) + k) == 0){
                        continuar = true;
                        *(*(matriz + i) + k) = n++;
                    }
                }
                k++;
            }
                
        } break;
        case 4: 
        {
            int primero = 0;
            int segundo = 1;
            for(int i = 0; i < a -> filas; i ++){
                for(int j = 0; j < a -> columnas; j++){
                    if(i == 0 and j == 0){
                        *(*(matriz + i) + j) = primero;
                    } else if((i == 0 and j == 1) or (i == 1 and a -> columnas == 1 and j == 0)){
                        *(*(matriz + i) + j) = segundo;
                    } else{
                        *(*(matriz + i) + j) = primero + segundo;
                        primero = segundo;
                        segundo += primero;
                    } 
                }
            }
        } break;
        case 5:
        {
            int n = 0;
            for(int i = 0; i < a -> filas; i ++){
                for(int j = 0; j < a -> columnas; j ++){
                    *(*(matriz + i) + j) = n += 2;
                }
            }
        }
    }
    //Imprimir la matriz
    for(int i = 0; i < a -> filas; i ++){
        for(int j = 0; j < a-> columnas; j++){
            std::cout << *(*(matriz + i) + j);
            std::cout << "\t";
        }
        std::cout << "\n";
    }

    delete a;
}

void actividad3(){
    int numrem;
    cout<<"¿Cuantas replicas de Bytey, quieres hacer?"<<endl;
    cin>>numrem; 
    
    if (numrem <=0){
        cout<<"Selecciona minimo 1 pls";
    }
    
    // Dinamico con new
    ImitacionFake* replica = new ImitacionFake[numrem];
        for (int i = 0; i < numrem; i++) {
            cout<<"Replica: "<<i+1<<endl;
            replica[i].ID = i + 1;
            cout<<"ID:  ";
            cout << "Nombre: ";
            cin>> replica[i].Nombre;
            //Creatividad jajsjaj 
            cout<<"Que item especial, quieres ponerle a esta replica. (ex. Habilidad)"<<endl;
            cin >> replica[i].TipoEspe;
            cout << "¿Cuál es su " << replica[i].TipoEspe << "? ";
            cin >> replica[i].ValEspe;
            cout<<"Replica, "<< i+1 <<" ya creada \n";
    }
    printrem(replica, numrem);
    delete[] replica;
}